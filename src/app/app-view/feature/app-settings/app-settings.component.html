@if (existingUser$ | async; as existingUser) {
<main #container>
  <h1>Settings</h1>

  <div class="user-image">
    <app-profile-picture
      class="app-profile-picture"
      [photoUrl]="existingUser.photoUrl || ''"
      [userTextAvatar]="
        existingUser.profileColor
          ? { name: existingUser.name, color: existingUser.profileColor }
          : undefined
      "
    />
  </div>

  <form [formGroup]="appSettingsForm">
    <fieldset class="form-section">
      <legend>App</legend>

      <div class="form-section__element">
        <div class="form-section__element-header">
          <h3>Theme</h3>
          <p>
            Choose whether you like the light/dark theme, or leave it to your
            device âœ¨
          </p>
        </div>

        <mat-form-field class="form-section__element-input">
          <mat-select formControlName="theme">
            <mat-select-trigger>
              <p class="theme-option">
                @switch (appSettingsForm.get(['theme'])?.value) {
                <!--  -->
                @case ('auto') {
                <mat-icon>auto_awesome</mat-icon> <span>Auto</span>
                } @case ('light') {
                <mat-icon>light_mode</mat-icon> <span>Light</span>
                } @case ('dark') {
                <mat-icon>dark_mode</mat-icon> <span>Dark</span>
                } @default {
                <span>Unknown state, please select a new one!</span>
                }
                <!--  -->
                }
              </p>
            </mat-select-trigger>

            <mat-option value="auto">
              <span class="theme-option">
                <mat-icon>auto_awesome</mat-icon> Auto
              </span>
            </mat-option>
            <mat-option value="light">
              <span class="theme-option">
                <mat-icon>light_mode</mat-icon> Light
              </span>
            </mat-option>
            <mat-option value="dark">
              <span class="theme-option">
                <mat-icon>dark_mode</mat-icon> Dark
              </span>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="form-section__element">
        <div class="form-section__element-header">
          <h3>Flash Mode</h3>
          <p>
            Don't wait three days to make your completed notes disappear. Do it
            in three minutes instead.
          </p>
        </div>

        <div class="switch-wrapper">
          <app-switch
            formControlName="fastDeletingMode"
            color="accent"
          />
        </div>
      </div>
    </fieldset>
  </form>

  <ul class="settings-sections">
    <li>
      <button
        type="button"
        class="settings-sections__link"
        (click)="viewTransitionService.goForward(container, '/app/account')"
        (keyup.enter)="
          viewTransitionService.goForward(container, '/app/account')
        "
        tabindex="0"
      >
        <div class="settings-section__header">
          <h3>Account</h3>
        </div>

        <div class="arrow-wrapper">
          <mat-icon>chevron_right</mat-icon>
        </div>
      </button>
    </li>
  </ul>
</main>
}
